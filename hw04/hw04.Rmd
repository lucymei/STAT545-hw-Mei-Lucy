---
title: "Untitled"
output: 
  html_document: 
    keep_md: yes
---

This is homework 04 from Lucy Mei.



# Choose my own adventure.
1. Pick one of the data reshaping prompts and do it.
2. Pick a join prompt and do it.

# General data reshaping and relationship to aggregation.

```{r}
library(gapminder)
library(tidyverse)
library(tidyr)
library(dplyr)
```

Prompts: 
## Activity #1
Make my own cheatsheet similar to Tyler Rinker's minimal guide to tidyr.
### First, get my data.
```{r}
country_lifeExp <- gapminder %>%
  select(country, lifeExp, pop) %>%
  group_by(country) %>%
  summarize(mlifeExp = mean(lifeExp), mpop=mean(pop))
  

dat <- data.frame(country_lifeExp)
dat
```

### Gather in Action
```{r}
dat %>% 
  gather (factor, number, -c(country))
```
In this case, we know that number is referred to lifeExp.

### Spread it Back Out
```{r}
dat %>% 
  gather(factor, number, -c(country)) %>%
  spread(factor, number)
```

```{r}
dat %>% gather(factor, number, mlifeExp)
```
In this case, only lifeExp is taken out to reshape.

```{r}
dat %>% 
  gather(factor, number, mlifeExp, mpop)
```

```{r}
dat %>% 
  gather(factor, number, -c(country)) %>%
  spread(country, number)
```
This way, the data can create columns according to each country.

## Activity #2 - Make a tibble with one row per year and columns for life expectancy for two or more countries
```{r}
coun_life<- gapminder %>%
  filter(country %in% c("China", "India")) %>%
  select(year, country,lifeExp) 
  
dat2 <- data.frame(coun_life)
dat2
```

This is a table of life expectancy of China and India of each year.
```{r}
dat21 <- dat2 %>% 
  spread (country, lifeExp)
knitr::kable(dat21, align = 'c', format = 'markdown', digits = 2, col.names= c("Year", "China", "India"))
```
It took me a while to figure this out. Year can stay the same, and I will type in what columns I want, then put in the corresponding value.

So, let's make a scatterplot. 
```{r}
ggplot(dat21, aes(year, China)) +
  geom_point(aes(year, China), color = "red") +
  geom_point(aes(year, India), color = "orange") +
  labs(x="Year", y="Life Expectancy", title ="Change of Life Expectancy of China and India Over Time")
```

## Activity #3 - Compute some measure of life expectancy for all possible combinations of continent and year. Reshape that to have one row per year and one variable for each continent. Or one row per continent and one variable per year.

```{r}
dat3 <- gapminder %>%
  select(continent, lifeExp, year) %>%
  group_by(continent, year) %>%
  mutate(meanle = mean(lifeExp))

dat31 <- data.frame(
  dat3 %>%
    select(year, continent, meanle))

dat31
```
```{r}
dat32 <- dat31 %>%
  spread(continent, meanle)
```


